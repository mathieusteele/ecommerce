<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title><%= title %></title>

    <link rel="stylesheet" type="text/css" href="/css/styles.css" />
  </head>

  <body>
    <%- include('../includes/nav.ejs') %>

        <main>
          <div class="bg-white">
            <div class="max-w-2xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-0">
              <h1
                class="
                  text-3xl
                  font-extrabold
                  text-center
                  tracking-tight
                  text-gray-900
                  sm:text-4xl
                "
              >
                Shopping Cart
              </h1>

              <form class="mt-12">
                <section aria-labelledby="cart-heading">
                  <h2 id="cart-heading" class="sr-only">
                    Items in your shopping cart
                  </h2>

                  <ul
                    role="list"
                    class="
                      border-t border-b border-gray-200
                      divide-y divide-gray-200
                    "
                  >


                    <% if (products.length > 0) { %> <% products.forEach(p => {
                    %>
                    <li class="flex py-6">
                      <div class="flex-shrink-0">
                        <img
                          src="<%= p.productData.imageUrl %>"
                          alt="<%= p.productData.title %>"
                          class="
                            w-24
                            h-24
                            rounded-md
                            object-center object-cover
                            sm:w-32 sm:h-32
                          "
                        />
                      </div>

                      <div class="ml-4 flex-1 flex flex-col sm:ml-6">
                        <div>
                          <div class="flex justify-between">
                            <h4 class="text-sm">
                              <a
                                href="/products/<%= p.productData.id %>"
                                class="
                                  font-medium
                                  text-gray-700
                                  hover:text-gray-800
                                "
                              >
                                <%= p.productData.title %>
                              </a>
                            </h4>
                            <p class="ml-4 text-sm font-medium text-gray-900">
                              $<%= p.productData.price %>
                            </p>
                          </div>
                          <p class="mt-1 text-sm text-gray-500">
                            <%= p.productData.description %>
                          </p>
                          <!-- <p class="mt-1 text-sm text-gray-500">
                              Medium
                            </p> -->
                        </div>

                        <div class="mt-4 flex-1 flex items-end justify-between">
                          <p
                            class="
                              flex
                              items-center
                              text-sm text-gray-700
                              space-x-2
                            "
                          >
                            <!-- Heroicon name: solid/check -->
                            <svg
                              class="flex-shrink-0 h-5 w-5 text-green-500"
                              xmlns="http://www.w3.org/2000/svg"
                              viewBox="0 0 20 20"
                              fill="currentColor"
                              aria-hidden="true"
                            >
                              <path
                                fill-rule="evenodd"
                                d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                clip-rule="evenodd"
                              />
                            </svg>
                            <span>Safety Inspection completed</span>
                          </p>
                          <div class="ml-4">
                            <form action="/cart-delete-item" method="POST">
                              <input
                                type="hidden"
                                name="productId"
                                value="<%= p.productData.id %>"
                              />
                              <button
                                type="submit"
                                class="
                                  text-sm
                                  font-medium
                                  text-indigo-600
                                  hover:text-indigo-500
                                "
                              >
                                <span>Remove</span>
                              </button>
                            </form>
                          </div>
                        </div>
                      </div>
                    </li>
           
                    <% }) %> <% } else { %>

                    <h1>No products in cart</h1>

                    <% } %>

                  </ul>
                </section>

                <!-- Order summary -->
                <section aria-labelledby="summary-heading" class="mt-10">
                  <h2 id="summary-heading" class="sr-only">Order summary</h2>

                  <div>
                    <dl class="space-y-4">
                      <div class="flex items-center justify-between">
                        <dt class="text-base font-medium text-gray-900">
                          Subtotal
                        </dt>
                        <dd class="ml-4 text-base font-medium text-gray-900">
                          $96.00
                        </dd>
                      </div>
                    </dl>
                    <p class="mt-1 text-sm text-gray-500">
                      Shipping and taxes will be calculated at checkout.
                    </p>
                  </div>

                  <div class="mt-10">
                    <button
                      type="submit"
                      class="
                        w-full
                        bg-indigo-600
                        border border-transparent
                        rounded-md
                        shadow-sm
                        py-3
                        px-4
                        text-base
                        font-medium
                        text-white
                        hover:bg-indigo-700
                        focus:outline-none
                        focus:ring-2
                        focus:ring-offset-2
                        focus:ring-offset-gray-50
                        focus:ring-indigo-500
                      "
                    >
                      Checkout
                    </button>
                  </div>

                  <div class="mt-6 text-sm text-center">
                    <p>
                      or
                      <a
                        href="/products"
                        class="
                          text-indigo-600
                          font-medium
                          hover:text-indigo-500
                        "
                        >Continue Shopping<span aria-hidden="true">
                          &rarr;</span
                        ></a
                      >
                    </p>
                  </div>
                </section>
              </form>
            </div>
          </div>
        </main>
        <%- include('../includes/footer.ejs') %>
      </div>
    </div>
  </body>
</html>
